%!TEX root = lec13.tex
% ================================================================================
% Lecture 13 — Slide 19
% ================================================================================
\begin{frame}[t]

\mytitle{Apptainer on HPC: Build vs Run}

\begin{columns}[T,totalwidth=\textwidth]

% ------------------------------------------------------------
\begin{column}[T]{0.50\textwidth}
\footnotesize

\textbf{What happens when pulling Docker images}

\begin{itemize}
  \item Apptainer converts Docker images into \y{local containers}
  \item This involves \y{SquashFS compression}
  \item Compression is \rtext{memory- and thread-intensive}
\end{itemize}

\vspace{2mm}
\textbf{Typical failure on login nodes}

\begin{itemize}
  \item Limited memory and process counts
  \item SquashFS build cannot create threads
\end{itemize}

\vspace{2mm}
{\footnotesize
\texttt{Out of memory (frag\_thrd)}\\
\texttt{Failed to create thread}
}

\end{column}

% ------------------------------------------------------------
\begin{column}[T]{0.46\textwidth}
\footnotesize

\textbf{Important distinction}

\begin{itemize}
  \item \y{Running} containers is lightweight
  \item \rtext{Building} containers is a compute task
\end{itemize}

\vspace{2mm}
\textbf{HPC policy (typical)}

\begin{itemize}
  \item Login nodes: editing, submitting jobs
  \item Compute nodes: builds, compression, heavy work
\end{itemize}

\vspace{2mm}
\rtext{\bf Apptainer pull = build step, not runtime.}

\end{column}

\end{columns}

\vspace{2mm}
\footnotesize
\centering
\y{Disk quota is irrelevant — memory and threads decide.}

\end{frame}
